!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function t(e,o){"use strict";function a(t){var e=h[f.locale];return e?e[t]:h.en[t]}function n(t,o,a){t.preventDefault(),e.isFunction(a)&&!1===a(t)||o.modal("hide")}function r(t){var e,o=0;for(e in t)o++;return o}function c(t,o){var a=0;e.each(t,function(t,e){o(t,e,a++)})}function l(t){var o,a;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return(t=e.extend({},f,t)).buttons||(t.buttons={}),t.backdrop=!!t.backdrop&&"static",o=t.buttons,a=r(o),c(o,function(t,n,r){if(e.isFunction(n)&&(n=o[t]={callback:n}),"object"!==e.type(n))throw new Error("button with key "+t+" must be an object");n.label||(n.label=t),n.className||(n.className=a<=2&&r===a-1?"btn-primary":"btn-default")}),t}function i(t,e){var o=t.length,a={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof t[0]?(a[e[0]]=t[0],a[e[1]]=t[1]):a=t[0],a}function s(t,o,a){return e.extend(!0,{},t,i(o,a))}function u(t,e,o,a){return b(s({className:"bootbox-"+t,buttons:p.apply(null,e)},a,o),e)}function p(){for(var t={},e=0,o=arguments.length;e<o;e++){var n=arguments[e],r=n.toLowerCase(),c=n.toUpperCase();t[r]={label:a(c)}}return t}function b(t,e){var a={};return c(e,function(t,e){a[e]=!0}),c(t.buttons,function(t){if(a[t]===o)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",group:"<div class='form-group'></div>",label:"<label class='col-sm-4 control-label'></label>",inputWrapper:"<div class='col-sm-8'></div>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",hidden:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=hidden />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",datetime:"<input class='bootbox-input bootbox-input-datetime form-control' autocomplete=off type='datetime-local' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var t;if((t=u("alert",["ok"],["message","callback"],arguments)).callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return!e.isFunction(t.callback)||t.callback()},m.dialog(t)},m.confirm=function(){var t;if(t=u("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(!1)},t.buttons.confirm.callback=function(){return t.callback(!0)},!e.isFunction(t.callback))throw new Error("confirm requires a callback");return m.dialog(t)},m.prompt=function(){var t,a,n,r,l,i,u;if(r=e(d.form),a={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"},t=b(s(a,arguments,["title","callback"]),["cancel","confirm"]),i=t.show===o||t.show,t.message=r,t.buttons.cancel.callback=t.onEscape=function(){return t.callback(null)},t.buttons.confirm.callback=function(){var o;switch(console.log("switch",t),t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"datetime":case"time":case"number":case"password":o=l.val();break;case"checkbox":var a=l.find("input:checked");o=[],c(a,function(t,a){o.push(e(a).val())})}return t.callback(o)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!d.inputs[t.inputType])throw new Error("invalid prompt type");switch(l=e(d.inputs[t.inputType]),console.log("switch2"),t.inputType){case"text":case"textarea":case"email":case"date":case"datetime":case"time":case"number":case"password":l.val(t.value);break;case"select":var f={};if(!(u=t.inputOptions||[]).length)throw new Error("prompt with select requires options");c(u,function(t,a){var n=l;if(a.value===o||a.text===o)throw new Error("given options in wrong format");a.group&&(f[a.group]||(f[a.group]=e("<optgroup/>").attr("label",a.group)),n=f[a.group]),n.append("<option value='"+a.value+"'>"+a.text+"</option>")}),c(f,function(t,e){l.append(e)}),l.val(t.value);break;case"checkbox":var h=e.isArray(t.value)?t.value:[t.value];if(!(u=t.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!u[0].value||!u[0].text)throw new Error("given options in wrong format");l=e("<div/>"),c(u,function(o,a){var n=e(d.inputs[t.inputType]);n.find("input").attr("value",a.value),n.find("label").append(a.text),c(h,function(t,e){e===a.value&&n.find("input").prop("checked",!0)}),l.append(n)})}return t.placeholder&&l.attr("placeholder",t.placeholder),r.append(l),r.on("submit",function(t){t.preventDefault(),n.find(".btn-primary").click()}),(n=m.dialog(t)).off("shown.bs.modal"),n.on("shown.bs.modal",function(){l.focus()}),!0===i&&n.modal("show"),n},m.form=function(){var t,a,n,r,l,i;if(r=e(d.form),a={className:"bootbox-prompt",buttons:p("cancel","confirm"),fields:{}},t=b(s(a,arguments,["title","callback"]),["cancel","confirm"]),i=t.show===o||t.show,t.message=r,r.addClass("form-horizontal"),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(null)},t.buttons.confirm.callback=function(){var o={};return console.log("switch3"),c(t.fields,function(a,n){switch(n.type){case"text":case"textarea":case"date":case"datetime":case"time":case"number":case"email":case"select":case"password":o[a]=l[a].val();break;case"hidden":o[a]=n.value;break;case"checkbox":if(t.fields[a].options){var r=l[a].find("input:checked");o[a]=[],c(r,function(t,n){o[a].push(e(n).val())})}else o[a]=l[a].find("input").is(":checked")}}),t.callback(o)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");return l={},c(t.fields,function(a,n){if("hidden"!=n.type){if(!d.inputs[n.type])throw new Error("invalid prompt type: "+n.type);switch(l[a]=e(d.inputs[n.type]),console.log("switch4"),n.type){case"text":case"textarea":case"email":case"date":case"datetime":case"time":case"number":case"password":l[a].val(n.value);break;case"select":var r={},i=n.options||[];if(!i.length)throw new Error("select field requires options");c(i,function(t,n){var c=l[a];if(n.value===o||n.text===o)throw new Error("given options in wrong format");n.group&&(r[n.group]||(r[n.group]=e("<optgroup/>").attr("label",n.group)),c=r[n.group]),c.append("<option value='"+n.value+"'>"+n.text+"</option>")}),c(r,function(t,e){l[a].append(e)}),l[a].val(t.value);break;case"checkbox":var s=e.isArray(n.value)?n.value:[n.value];if(!(i=n.options||[{value:!0,text:" "}]).length)throw new Error("checkbox field requires options");if(!i[0].value||!i[0].text)throw new Error("checkbox options given in wrong format");l[a]=e("<div/>"),c(i,function(t,o){var r=e(d.inputs[n.type]);r.find("input").attr("value",o.value),r.find("label").append(o.text),c(s,function(t,e){e===o.value&&r.find("input").prop("checked",!0)}),l[a].append(r)})}n.placeholder&&l[a].attr("placeholder",n.placeholder),n.readonly&&l[a].attr("readOnly",n.readonly),n.inputclass&&l[a].addClass(n.clinputclassass),n.gclass&&(l[a].gclass=n.gclass),n.style&&l[a].css(n.style)}}),c(l,function(o,a){var n=e(d.group);a.gclass&&n.addClass(a.gclass);var c=e(d.label),l=e(d.inputWrapper);c.html(t.fields[o].label),l.append(a),n.append(c),n.append(l),r.append(n)}),r.on("submit",function(t){t.preventDefault(),n.find(".btn-primary").click()}),(n=m.dialog(t)).off("shown.bs.modal"),!0===i&&n.modal("show"),n},m.dialog=function(t){t=l(t);var o=e(d.dialog),a=o.find(".modal-body"),r=t.buttons,i="",s={onEscape:t.onEscape};if(c(r,function(t,e){i+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",s[t]=e.callback}),a.find(".bootbox-body").html(t.message),!0===t.animate&&o.addClass("fade"),t.className&&o.addClass(t.className),t.title&&a.before(d.header),t.closeButton){var u=e(d.closeButton);t.title?o.find(".modal-header").prepend(u):u.css("margin-top","-10px").prependTo(a)}return t.title&&o.find(".modal-title").html(t.title),i.length&&(a.after(d.footer),o.find(".modal-footer").html(i)),o.on("hidden.bs.modal",function(t){t.target===this&&o.remove()}),o.on("shown.bs.modal",function(){o.find(".btn-primary:first").focus()}),o.on("escape.close.bb",function(t){s.onEscape&&n(t,o,s.onEscape)}),o.on("click",".modal-footer button",function(t){var a=e(this).data("bb-handler");n(t,o,s[a])}),o.on("click",".bootbox-close-button",function(t){n(t,o,s.onEscape)}),o.on("keyup",function(t){console.log("keyups"),27===t.which&&o.trigger("escape.close.bb")}),e(t.container).append(o),o.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&o.modal("show"),o},m.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(f,t)},m.hideAll=function(){e(".bootbox").modal("hide")};var h={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lv:{OK:"OK",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.init=function(o){return t(o||e)},m});